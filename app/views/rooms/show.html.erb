
<div class='room_show' style="margin-top: 60px;">
<!-- 左側 -->
  <div class="col-xs-3 text-center" style="margin-bottom: 100px; padding-top: 10px; background-color: #dbedff; border-radius: 10px;">
    <div class="title" style="">
      <p style="font-size: 30px; text-align: center"><strong>チャット一覧</strong></p>
    </div>
    <% @room_invite_user_c.each do |room| %>
      <% invited_user = User.find(room.invited_user_id) %>
      <% if @room.invited_user_id == room.invited_user_id %>
        <div class="user_friend" style="height: 60px; margin-bottom: 20px; background-color: #ffd0cc;">
          <%= link_to room_path(room.id) do %>
            <div class="friend_image col-md-2" style="padding-top: 4px; padding-bottom: 4px; padding-left: 20px;">
              <%= attachment_image_tag invited_user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
            </div>
            <div class="friend_name col-md-10 glyphicon glyphicon-user" style="height: 60px; padding-top: 15px; padding-bottom: 15px; padding-left: 20px; float: left; font-size: 20px; color: black;">
              <%= invited_user.user_name %>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="user_friend" style="height: 60px; margin-bottom: 20px;">
          <%= link_to room_path(room.id) do %>
            <div class="friend_image col-md-2" style="padding-top: 4px; padding-bottom: 4px; padding-left: 20px;">
              <%= attachment_image_tag invited_user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
            </div>
            <div class="friend_name col-md-10" style="height: 60px; padding-top: 15px; padding-bottom: 15px; padding-left: 20px; float: left; font-size: 20px; color: black;">
              <%= invited_user.user_name %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
    <% @room_invited_user_c.each do |room| %>
      <% invite_user = User.find(room.invite_user_id) %>
      <% if @room.invite_user_id == room.invite_user_id %>
        <div class="user_friend" style="height: 60px; margin-bottom: 20px; background-color: #ffd0cc;">
          <%= link_to room_path(room.id) do %>
            <div class="friend_image col-md-2" style="padding-top: 4px; padding-bottom: 4px; padding-left: 20px;">
              <%= attachment_image_tag invite_user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
            </div>
            <div class="friend_name col-md-10 glyphicon glyphicon-user" style="height: 60px; padding-top: 15px; padding-bottom: 15px; padding-left: 20px; float: left; font-size: 20px; color: black;">
              <%= invite_user.user_name %>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="user_friend" style="height: 60px; margin-bottom: 20px;">
          <%= link_to room_path(room.id) do %>
            <div class="friend_image col-md-2" style="padding-top: 4px; padding-bottom: 4px; padding-left: 20px;">
              <%= attachment_image_tag invite_user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
            </div>
            <div class="friend_name col-md-10" style="height: 60px; padding-top: 15px; padding-bottom: 15px; padding-left: 20px; float: left; font-size: 20px; color: black;">
              <%= invite_user.user_name %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
<!-- /左側 -->

<!-- 右側 -->
  <div class="col-xs-9">
    <div class="chat_title">
      <% if @room.invite_user_id == current_user.id %>
        <% invited_user = User.find(@room.invited_user_id) %>
        <div class="chat_user" style="padding-top: 10px;">
          <p style="font-size: 30px; text-align: center"><strong><%= invited_user.user_name %>とのチャット</strong></p>
        </div>
      <% else %>
        <% invite_user = User.find(@room.invite_user_id) %>
        <div class="chat_user" style="padding-top: 10px;">
          <p style="font-size: 30px; text-align: center"><strong><%= invite_user.user_name %>とのチャット</strong></p>
        </div>
      <% end %>
    </div>
    <hr class="col-xs-12">
    <div class="chat_message">
      <% if @messages.present? %>
        <% @messages.each do |m| %>
          <% if m.user_id == current_user.id %>
            <h4 class="text-left">
              <div class="text-area alert alert-success col-xs-12" style="word-wrap: break-word; padding: 5px;">
                <div class="col-xs-1" style=" padding-left: 14px; padding-bottom: 10px;">
                  <div class="user_image" style="padding-top: 10px;">
                    <%= attachment_image_tag m.user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
                  </div>
                </div>
                <div class="col-xs-11" style="padding-right: 0px;">
                  <div class="col-xs-12" style="padding: 0px;">
                    <div class="col-xs-9" style="padding: 0px;">
                      <small><strong style="color: green;"><%= m.user.user_name %></strong></small>
                    </div>
                    <div class="col-xs-3" style="padding: 0px; padding-bottom: 5px;">
                      <small>
                        <%= m.created_at.strftime("%Y-%m-%d  %H:%M") %>
                        <strong><%= link_to edit_message_path(m.id), class:"message_#{m.id}" do %>編集<% end %></strong>
                        <strong><%= link_to message_path(m.id), "data-confirm" => "このメッセージを削除しますか?", method: :delete, class:"delete_message_#{m.id}" do %>削除<% end %></strong>
                      </small>
                    </div>
                  </div>
                  <div class="content" style="padding-top: 0px;">
                    <small style="line-height: 18px;"><%= simple_format(m.content) %></small>
                  </div>
                </div>
              </div>
            </h4>
          <% else %>
            <h4 class="text-left">
              <div class="text-area alert alert-info col-xs-12" style="word-wrap: break-word; padding: 5px;">
                <div class="col-xs-1" style=" padding-left: 14px; padding-bottom: 10px;">
                  <div class="user_image" style="padding-top: 10px;">
                    <%= attachment_image_tag m.user, :user_image,　format: 'jpeg', class: "img-circle pull-left profile-img", fallback: "no_image.jpg", size: "50x50" %>
                  </div>
                </div>
                <div class="col-xs-11" style="padding-right: 0px;">
                  <div class="col-xs-12" style="padding: 0px;">
                    <div class="col-xs-9" style="padding: 0px;">
                      <small><strong style="color: blue;"><%= m.user.user_name %></strong></small>
                    </div>
                    <div class="col-xs-3" style="padding: 0px; padding-bottom: 5px;">
                      <small>
                        <%= m.created_at.strftime("%Y-%m-%d  %H:%M") %>
                      </small>
                    </div>
                  </div>
                  <br>
                  <div class="content" style="padding-top: 0px; padding-bottom: 5px;">
                    <small style="line-height: 16px;"><%= simple_format(m.content) %></small>
                  </div>
                </div>
              </div>
            </h4>
          <% end %>
        <% end %>
      <% else %>
        <br>
        <h3 class="text-center">メッセージはまだありません</h3>
        <br>
      <% end %>
    </div>
    <!-- <hr class="col-xs-12"> -->
    <div class="chat_form">
      <%= form_for @message do |f| %>
        <%= f.text_area :content, class:"form-control", placeholder:"メッセージを入力して下さい" %>
        <%= f.hidden_field :room_id, value: @room.id %>
        <br>
        <div class="text-center">
          <%= f.submit "投稿する", :class => "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
<!-- /右側 -->
</div>

